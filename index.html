<!DOCTYPE html>
<html>
<head>
    <title>Public Enquiry Form</title>
</head>

<body>
<h2>Public Enquiry Form</h2>

<form id="enquiryForm">
    <label>Name:</label><br>
    <input type="text" id="name" required><br><br>

    <label>Email:</label><br>
    <input type="email" id="email" required><br><br>

    <label>Message:</label><br>
    <textarea id="message" required></textarea><br><br>

    <button type="submit">Submit</button>
</form>

<p id="status"></p>

<!-- FIREBASE -->
<script type="module">
    // Firebase SDK (Modules)
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
    import { 
        getFirestore, collection, addDoc, serverTimestamp 
    } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

    // âœ… YOUR FIREBASE CONFIG (already injected)
    const firebaseConfig = {
      apiKey: "AIzaSyD6bKM4SlUn1bUWnlua4Xbs07bj65J3Vns",
      authDomain: "webform-92ba1.firebaseapp.com",
      projectId: "webform-92ba1",
      storageBucket: "webform-92ba1.firebasestorage.app",
      messagingSenderId: "997411635786",
      appId: "1:997411635786:web:d6c12ca2992221cedd1cb3"
    };

    // Init Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Handle Form Submit
    document.getElementById("enquiryForm").addEventListener("submit", async (e) => {
        e.preventDefault();

        const status = document.getElementById("status");
        status.innerText = "Submitting...";

        try {
            await addDoc(collection(db, "enquiries"), {
                name: document.getElementById("name").value,
                email: document.getElementById("email").value,
                message: document.getElementById("message").value,
                status: "new",
                createdAt: serverTimestamp()
            });

            status.innerText = "Enquiry submitted successfully!";
            document.getElementById("enquiryForm").reset();
        } catch (error) {
            status.innerText = "Error: " + error.message;
        }
    });
</script>
</body>
</html>
